# Agent Memory example environment file
# Usage:
#   cp .env.example .env
#   set -a; source .env; set +a

AGENT_MEMORY_CONFIG=  # Optional path to JSON config overlay (loaded before env vars)

OPENROUTER_API_KEY=your-openrouter-api-key  # Required for semantic embeddings
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1  # Embedding API base URL (or local server URL)

# Embedding model â€” pick based on your hardware (run ./scripts/detect-hardware.sh):
#   minimal:  google/embeddinggemma-300m    dim=768   (314MB, RPi / $5 VPS)
#   light:    qwen/qwen3-embedding-0.6b    dim=1024  (610MB, small VPS)
#   standard: qwen/qwen3-embedding-4b      dim=2560  (4GB, mid-range)
#   heavy:    qwen/qwen3-embedding-8b      dim=4096  (8GB, dedicated server)
AGENT_MEMORY_MODEL=qwen/qwen3-embedding-4b  # Embedding model id
AGENT_MEMORY_DIMENSIONS=2560  # Embedding output dimensions (must match model)
AGENT_MEMORY_MAX_EMBED_CHARS=3500  # Truncate long text before embedding

AGENT_MEMORY_DATA_DIR=$HOME/.agent-memory  # Data directory (DBs, API key, backups). Scripts auto-detect legacy ~/.asuman/ too.
AGENT_MEMORY_DB=$HOME/.agent-memory/memory.sqlite  # SQLite DB path (auto-resolves: env > ~/.agent-memory > ~/.asuman)
AGENT_MEMORY_HOST=127.0.0.1  # API bind host
AGENT_MEMORY_PORT=8787  # API bind port
AGENT_MEMORY_API_KEY=change-this-api-key  # API auth key (X-API-Key)
AGENT_MEMORY_SESSIONS_DIR=$HOME/.openclaw/agents/main/sessions  # OpenClaw sessions directory

AGENT_MEMORY_W_SEMANTIC=0.50  # Hybrid recall weight: semantic vector similarity
AGENT_MEMORY_W_KEYWORD=0.25  # Hybrid recall weight: BM25 keyword score
AGENT_MEMORY_W_RECENCY=0.10  # Hybrid recall weight: recency score
AGENT_MEMORY_W_STRENGTH=0.07  # Hybrid recall weight: memory strength score
AGENT_MEMORY_W_IMPORTANCE=0.08  # Hybrid recall weight: write-time importance score

AGENT_MEMORY_RERANKER_ENABLED=true  # Enable primary cross-encoder reranker
AGENT_MEMORY_RERANKER_MODEL=balanced  # Preset: fast|balanced|quality or full HF model id
AGENT_MEMORY_RERANKER_TOP_K=10  # Candidates reranked by primary pass
AGENT_MEMORY_RERANKER_WEIGHT=0.22  # Primary reranker blend weight
AGENT_MEMORY_RERANKER_THREADS=4  # Torch threads for primary reranker
AGENT_MEMORY_RERANKER_MAX_DOC_CHARS=600  # Max chars per document in primary reranker
AGENT_MEMORY_RERANKER_PREWARM=true  # Warm primary reranker on startup

AGENT_MEMORY_RERANKER_TWO_PASS_ENABLED=true  # Enable background quality reranking pass
AGENT_MEMORY_RERANKER_TWO_PASS_MODEL=quality  # Background reranker preset/model
AGENT_MEMORY_RERANKER_TWO_PASS_TOP_K=3  # Candidates reranked in second pass
AGENT_MEMORY_RERANKER_TWO_PASS_WEIGHT=0.35  # Two-pass reranker blend weight
AGENT_MEMORY_RERANKER_TWO_PASS_THREADS=2  # Torch threads for second pass
AGENT_MEMORY_RERANKER_TWO_PASS_MAX_DOC_CHARS=450  # Max chars per document in second pass
AGENT_MEMORY_RERANKER_TWO_PASS_PREWARM=false  # Warm background reranker on startup

AGENT_MEMORY_EMBED_WORKER_ENABLED=true  # Background worker: auto-embeds vectorless memories
AGENT_MEMORY_EMBED_WORKER_INTERVAL=300  # Seconds between embed worker sweeps (default 300)

# Legacy compatibility variables (deprecated; AGENT_MEMORY_* takes priority)
ASUMAN_MEMORY_CONFIG=  # Legacy alias for AGENT_MEMORY_CONFIG
ASUMAN_MEMORY_DB=  # Legacy alias for AGENT_MEMORY_DB
ASUMAN_MEMORY_MODEL=  # Legacy alias for AGENT_MEMORY_MODEL
ASUMAN_MEMORY_PORT=  # Legacy alias for AGENT_MEMORY_PORT
ASUMAN_MEMORY_DIMENSIONS=  # Legacy alias for AGENT_MEMORY_DIMENSIONS
ASUMAN_MEMORY_HOST=  # Legacy alias for AGENT_MEMORY_HOST
ASUMAN_SESSIONS_DIR=  # Legacy alias for AGENT_MEMORY_SESSIONS_DIR

# Docker-specific (used by docker-compose.yml)
EMBEDDING_MODEL_FILE=Qwen3-Embedding-4B-Q8_0.gguf  # Model filename in ./models/
EMBEDDING_THREADS=4  # CPU threads for embedding server
EMBEDDING_PARALLEL=2  # Concurrent embedding requests
